<!DOCTYPE html>
<html class="h-100" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:replace="fragments/head :: header" />
    <!-- <link rel="stylesheet" th:href="@{/css/login.css}" href="css/login.css" type="text/css" /> -->
    <!-- <link rel="stylesheet" href="css/calendar.css" /> -->
    <link rel="stylesheet" href="css/settings.css" />
    <link rel="stylesheet" href="css/settingsItems.css" />

    <title>Configuracion</title>
</head>

<body class="d-flex flex-column h-100">
    <header th:replace="fragments/nav.html :: nav"></header>

    <div class="col bodyCol">

      <!-- https://www.codingnepalweb.com/elastic-active-tab-animation-html-css/ -->
      <div class="wrapper">
        <div class="nav customNav" role="tablist" > <!-- nav-tabs -->
            <input type="radio" name="tab" id="staff" onclick="manageTabs(event)" checked>
            <input type="radio" name="tab" id="courses" onclick="manageTabs(event)">
            <input type="radio" name="tab" id="lessons" onclick="manageTabs(event)">
            <input type="radio" name="tab" id="items" onclick="manageTabs(event)">
            <input type="radio" name="tab" id="subscriptions" onclick="manageTabs(event)">
            <input type="radio" name="tab" id="rental" onclick="manageTabs(event)">
            <label for="staff" class="staff"><a href="#">Empleados</a></label>
            <label for="courses" class="courses"><a href="#">Cursos</a></label>
            <label for="lessons" class="lessons"><a href="#">Clases</a></label>
            <label for="items" class="items"><a href="#">Material</a></label>
            <label for="subscriptions" class="subscriptions" ><a href="#">Suscripciones</a></label>
            <label for="rental" class="rental" ><a href="#">Alquiler</a></label>
            <div class="tab"></div>
        </div>
      </div>
      
      <div id="staffPanel" class="customTab firstTab">
        <div class="col staffListCol">
            <div clas="row">
              <div class="col d-flex justify-content-end">
                <!-- <button class="btn btn-primary openStaffModalButton">Añadir empleado</button> -->
                <button type="button" class="btn btn-primary openStaffModalButton" data-bs-toggle="modal" data-bs-target="#addStaffModal">
                  Añadir empleado
                </button> 
              </div>
            </div>
            <div th:each="emp,iter: ${employeesList}" id="staffDivList">
                <div class="row staffDiv"  th:data-id="${emp.id}">
                  <div class="col d-flex justify-content-start">
                    <p th:text="${emp.firstName} + ' ' + ${emp.lastName}" class="staffName" th:id="${emp.id}+'Names'">staff username</p>
                  </div>
                  
                  <div class="col d-flex justify-content-end">
                    <button class="btn btn-secondary modifyStaffButton button_slide slide_left" th:value="${emp.id}" data-bs-toggle="modal" data-bs-target="#modifyStaffModal">Modificar</button>
                    <button class="btn btn-danger deleteStaffButton slide">Eliminar</button>
                  </div>
                </div>
            </div>
        </div>
      </div>

      <div id="coursesPanel" class="customTab">
        b
      </div>

      <div id="lessonsPanel" class="customTab">
        c
      </div>

      <div id="itemsPanel" class="customTab">

        <div class="row">
          <div class="col d-flex justify-content-end">
           
             <button type="button" class="btn btn-primary openStaffModalButton" data-bs-toggle="modal" data-bs-target="#modalAddItem">
              Añadir Material
            </button> 
          </div>

        </div>

        <div id="itemsContainer">
          <th:block th:each="item,iter: ${items}">
  
          <div class="row itemRow">

            <div class="col-3">
              <div class="itemImgContainer">
                 
                <span>
                  <img th:src="@{/img/items/{id}.jpg(id=${item.id})}"th:id="'itemImg'+${item.id}" class="itemImg" src="/img/drawing.jpg" />
                  <button th:value="${item.id}" data-bs-toggle="modal" data-bs-target="#modalModifyItemImg" class="editImgButton">✏️</button>
                </span>
                
              </div>
              
            </div>

            <div class="col">
          
             <div class="row itemHeader">
              <div class="col-4">
                <p th:id="'itemName'+${item.id}" class="" th:text="${item.name}">Nombre del objeto</p>
              </div>
              <div class="col-4 offset-4">
                <p th:id="'itemQuantityText'+${item.id}" class="" th:text="'Unidades: ' + ${item.quantity}">Unidades</p>
                <input type="hidden" th:id="'itemQuantity'+${item.id}" th:value="${item.quantity}">
              </div>
             </div>
             
             <div class="itemDescContainer">
                <p th:id="'itemDesc'+${item.id}" class="itemDescText" th:text="${item.description}">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
              </div>
              <p th:id="'itemMaxLoanText'+${item.id}" th:text="${'Cantidad maxima que un usuario puede alquilar a la vez: '+item.maxLoan}" class="itemMaxLoan">Cantidad maxima que un usuario puede alquilar a la vez: 5</p>
              <input type="hidden" th:id="'itemMaxLoan'+${item.id}" th:value="${item.maxLoan}">
            </div>

            <div class="col-1">
              <div class="itemButtonsContainer">
                <button class="btn itemButtonModify" th:value="${item.id}" data-bs-toggle="modal" data-bs-target="#modalModifyItem">Modificar</button>
                <button th:value="${item.id}" class="btn itemButtonDelete deleteItem">Eliminar</button>
              </div>        
            </div>

          </div>
  
        </th:block>
          
        </div>

      </div>

      <div id="subscriptionsPanel" class="customTab">
        e
      </div>

      <div id="rentalPanel" class="customTab">
        rental panel
      </div>

    </div>

  


    <!-- ------ MODALES -------- -->
    <!-- Modal anadir empleado -->
    <div class="modal fade" id="addStaffModal" tabindex="-1" aria-labelledby="addStaffModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addStaffModalLabel">Añadir empleado</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="addStaffForm" th:action="@{/}" onsubmit="return false;">
              <label for="username" style="display: block;">Username</label>
              <input type="text" id="username" required>

              <label for="email" style="display: block;" class="modalLabel">Email</label>
              <input type="email" id="email" required>

              <div class="row">
                  <div class="col">
                      <label for="firstName" style="display: block;" class="modalLabel">Nombre</label>
                      <input type="text" id="firstName">
                  </div>
                  <div class="col">
                      <label for="lastName" style="display: block;" class="modalLabel">Apellido</label>
                      <input type="text" id="lastName">
                  </div>
              </div>

              <div class="row">
                  <div class="col">
                      <label for="password1" style="display: block;" class="modalLabel">Contraseña</label>
                      <input type="password" id="password1" onchange="validatePassword()" required>
                  </div>
                  <div class="col">
                      <label for="password2" style="display: block;" class="modalLabel">Repite la contraseña</label>
                      <input type="password" id="password2" onkeyup="validatePassword()" required>
                  </div>
              </div>

              <div class="row">
                  <div class="col">
                      <label for="address" style="display: block;" class="modalLabel">Direccion</label>
                      <input type="input" id="address" required>
                  </div>
                  <div class="col">
                      <label for="phone" style="display: block;" class="modalLabel">Telefono</label>
                      <input type="tel" id="phone" required>
                  </div>
              </div>

              <div class="modal-footer">
                  <button type="button" id="closeModalAddStaff" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                  <button type="submit" id="addStaffButton" class="btn btn-primary">Añadir</button>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal modificar empleado -->
    <div class="modal fade" id="modifyStaffModal" tabindex="-1" aria-labelledby="modifyStaffModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modifyStaffModalLabel">Modificar empleado</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="modifyStaffForm" th:action="@{/}" onsubmit="return false;">
              <input type="hidden" id="idUser">
              <input type="hidden" id="oldUsername">

              <label for="usernameMod" style="display: block;">Username</label>
              <input type="text" id="usernameMod" required>

              <label for="emailMod" style="display: block;" class="modalLabel">Email</label>
              <input type="email" id="emailMod" required>

              <div class="row">
                  <div class="col">
                      <label for="firstNameMod" style="display: block;" class="modalLabel">Nombre</label>
                      <input type="text" id="firstNameMod">
                  </div>
                  <div class="col">
                      <label for="lastNameMod" style="display: block;" class="modalLabel">Apellido</label>
                      <input type="text" id="lastNameMod">
                  </div>
              </div>

              <div class="row">
                  <div class="col">
                      <label for="password1Mod" style="display: block;" class="modalLabel">Contraseña</label>
                      <input type="password" id="password1Mod" onchange="validatePassword2()">
                  </div>
                  <div class="col">
                      <label for="password2Mod" style="display: block;" class="modalLabel">Repite la contraseña</label>
                      <input type="password" id="password2Mod" onkeyup="validatePassword2()">
                  </div>
              </div>

              <div class="row">
                  <div class="col">
                      <label for="addressMod" style="display: block;" class="modalLabel">Direccion</label>
                      <input type="input" id="addressMod" required>
                  </div>
                  <div class="col">
                      <label for="phoneMod" style="display: block;" class="modalLabel">Telefono</label>
                      <input type="tel" id="phoneMod" required>
                  </div>
              </div>

              <div class="modal-footer">
                  <button type="button" id="closeModalModifyStaff" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                  <button type="submit" id="modifyStaffButton" class="btn btn-primary">Guardar</button>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>


     <!-- Modal add item -->
     <div class="modal fade" id="modalAddItem" tabindex="-1" aria-labelledby="modalAddItemLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modalAddItemLabel">Añadir Material</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form role="form" id="addItemForm"> 
                  <label for="itemNameField" class="form-label">Nombre del item</label>
                  <input type="text" class="form-control" name="itemName" id="itemNameField" value="" required> 

                  <label class="form-label" for="itemQuantityField">Cantidad del item</label>
                  <input type="number" id="itemQuantityField" name="itemQuantity"  class="form-control" required/>

                  <label for="itemDescField" class="form-label">Descripcion del item</label>
                  <textarea class="form-control" id="itemDescField" name="itemDesc" rows="4" cols="60" required></textarea>

                  <label class="form-label" for="itemMaxLoanField">Cantidad maxima que un usuario podrá alquilar a la vez</label>
                  <input type="number" id="itemMaxLoanField" name="itemQuantity"  class="form-control" required/>
                  
                  <label for="fileFieldImgItem" class="form-label">Imagen del plato</label>
                  <img id="newImgItem" alt="Imagen nuevo Plato" class="img-thumbnail mw-100 miClase">
                  <input type="file" id="fileFieldImgItem" accept="image/jpeg,image/png" required>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" id ="buttonFormConfirmItem" class="btn btn-primary">Confirmar</button>
                  </div>
                </form>
            </div>
          </div>
        </div>
     </div>


     <!-- Modal modify item -->
     <div class="modal fade" id="modalModifyItem" tabindex="-1" aria-labelledby="modalAddItemLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modalModifyItemLabel">Modificar material</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form role="form" id="modifyItemForm">
                  <label for="itemNameFieldM" class="form-label">Nombre del item</label>
                  <input type="text" class="form-control" name="itemName" id="itemNameFieldM" value="" required> 


                  <label class="form-label" for="itemQuantityFieldM">Cantidad del item</label>
                  <input type="number" id="itemQuantityFieldM" name="itemQuantity"  class="form-control" required/>

                  <label for="itemDescFieldM" class="form-label">Descripcion del item</label>
                  <textarea class="form-control" id="itemDescFieldM" name="itemDesc" rows="4" cols="60" required></textarea>

                  <label class="form-label" for="itemMaxLoanFieldM">Cantidad maxima que un usuario podrá alquilar a la vez</label>
                  <input type="number" id="itemMaxLoanFieldM" name="itemQuantity"  class="form-control" required/>
                  
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" id ="buttonFormConfirmItemM" class="btn btn-primary">Confirmar</button>
                  </div>
                </form>
            </div>
          </div>
        </div>
     </div>


      <!-- Modal modify item Img -->
      <div class="modal fade" id="modalModifyItemImg" tabindex="-1" aria-labelledby="modalAddItemLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="modalModifyItemLabel">Modificar material</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form role="form" id="modifyItemFormImg"> 
                   
                    <label for="fileFieldImgItem" class="form-label">Imagen del material</label>
                    <img id="newImgItemM" alt="Imagen del material" class="img-thumbnail mw-100 miClase">
                    <input type="file" id="fileFieldImgItemM" accept="image/jpeg,image/png" required>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                      <button type="button" id ="buttonFormConfirmItemImgM" class="btn btn-primary">Confirmar</button>
                    </div>
                  </form>
              </div>
            </div>
          </div>
       </div>
    
    <!-- <script th:src="@{/js/calendar.js}" src="js/calendar.js"></script> -->
    <script th:src="@{/js/settings.js}" src="js/settings.js"></script>

    
    
</body>

<th:block th:replace="fragments/footer.html :: footer" />
<script th:src="@{/js/settingsItems.js}" src="js/settingsItems.js" ></script>

</html>